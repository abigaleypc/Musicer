<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>登录</title>
</head>

<body>
  <input name="username" type="text" placeholder="用户名" />
  <input name="password" type="password" placeholder="密码" />
  <button id="login">login</button>
  <script>
    const { ipcRenderer } = window.require('electron');
    const request = require('request')


    document.querySelector('#login').addEventListener('click', () => {

      let username = document.querySelector('input[name="username"]');
      console.log('------------------------------------');
      console.log(username);
      console.log('------------------------------------');
      var url = 'http://localhost:8082/login';
      request.post(url, {
        json: true,
        qs: {
          username: '13798994068',
          password: '1234567890ypc'
        }
      }).on('error', err => {
        res.status(500).end(err);
      }).on('data', res => {
        if (res.code == 1) {
          ipcRenderer.send('login-event', { isLogin: true })
        } else {
          //提示密码错误
          // ipcRenderer.send('login-event', { isLogin: false })
        }

      })


    })


  </script>
</body>

</html>
